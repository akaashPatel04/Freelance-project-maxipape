DirectoryIndex index.html

Header append Vary User-Agent

RewriteEngine On

# Redirect to index.html for directory requests
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^(.*[^/])$ /$1/index.html [NC,L]

# Umleitung auf .html Dateien, wenn nicht existent
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^([^\.]+)/?$ $1.html [NC,L]

# Umleitung auf .php Dateien, wenn nicht existent
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^([^\.]+)/?$ $1.php [NC,L]

# Umleitung auf HTTPS und www
RewriteCond %{HTTP_HOST} !^www\. [NC,OR]
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L]

# Umleitung auf HTTPS
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# Entfernen des Slash am Ende der URL und Anzeigen der gleichen Seite ohne Slash
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ /$1 [L,R=301]

# Error Pages
ErrorDocument 400 /400
ErrorDocument 401 /401
ErrorDocument 403 /403
ErrorDocument 404 /404
ErrorDocument 500 /500
ErrorDocument 502 /502
ErrorDocument 503 /503
ErrorDocument 505 /505

# Umleitung der Error Pages auf entsprechende Fehlerseiten
RewriteRule ^400$ /400 [R=404]
RewriteRule ^401$ /401 [R=404]
RewriteRule ^403$ /403 [R=404]
RewriteRule ^404$ /404 [R=404]
RewriteRule ^500$ /500 [R=404]
RewriteRule ^502$ /502 [R=404]
RewriteRule ^503$ /503 [R=404]
RewriteRule ^505$ /505 [R=404]

# .htaccess blockieren
<Files .htaccess>
    Order allow,deny
    Deny from all
</Files>

# Verzeichnis Auflistung blockieren
Options -Indexes

# Sensible Dateien blockieren
<FilesMatch "(^\.htaccess|\.htpasswd|\.json|\.log|\.md|\.sql|\.txt)">
    Order deny,allow
    Deny from all
</FilesMatch>

# Backup Dateien blockieren
<FilesMatch "\.(bak|config|sql|fla|psd|ini|log|sh|inc|swp|dist)|~$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Gzip-Komprimierung aktivieren
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript
</IfModule>

# Bots blockieren
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{HTTP_USER_AGENT} ^.*(BlackWidow|Bot\ mailto:craftbot@yahoo.com|ChinaClaw|Custo|DISCo|Download\ Demon|eCatch|EirGrabber|EmailSiphon|EmailWolf|Express\ WebPictures|ExtractorPro|EyeNetIE|FlashGet|GetRight|GetWeb!|Go!Zilla|Go-Ahead-Got-It|GrabNet|Grafula|HMView|HTTrack|Image\ Stripper|Image\ Sucker|Indy\ Library|InterGET|Internet\ Ninja|JetCar|JOC\ Web\ Spider|larbin|LeechFTP|Mass\ Downloader|MIDown\ tool|Mister\ PiX|Navroad|NearSite|NetAnts|NetSpider|Net\ Vampire|NetZIP|Octopus|Offline\ Explorer|Offline\ Navigator|PageGrabber|Papa\ Foto|pavuk|pcBrowser|RealDownload|ReGet|SiteSnagger|SmartDownload|SuperBot|SuperHTTP|Surfbot|tAkeOut|Teleport\ Pro|VoidEYE|Web\ Image\ Collector|Web\ Sucker|WebAuto|WebCopier|WebFetch|WebGo\ IS|WebLeacher|WebReaper|WebSauger|Website\ eXtractor|Website\ Quester|WebStripper|WebWhacker|WebZIP|Wget|Widow|WWWOFFLE|Xaldon\ WebSpider|Zeus).*$ [NC]
    RewriteRule .* - [F,L]
</IfModule>
